
<head>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>
<body>
  <div>AccessToken:</div>
  <div id="accessToken"></div>
  <button id="copy">Copy</button>
  <script src="/login/authenticator.js"></script>
  <script>
    console.log("Getting access token");
    const authenticator = new Authenticator();

    let accessToken = '';

    document.getElementById('copy').addEventListener('click', (event) => {
      navigator.clipboard.writeText(accessToken);
    });

    const token = authenticator.getAccessToken().then(token => {
      console.log("Got token", token);
      document.getElementById('accessToken').innerHTML = token;
      accessToken = token;
    });
  </script>
</body>